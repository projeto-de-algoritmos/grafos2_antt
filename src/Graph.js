// import graph from './assets/graph.json';
const graph = {
	empresas_habilitadas_regular: [
		{
			"cnpj": "04.192.453/0001-18",
			"razao_social": "ALFA LUZ VIACAO TRANSPORTE LTDA",
			"numero_tar": "145",
			"numero_lop": "17",
			"data_autorizacao": "08/07/2016",
			"prefixo": "12-0140-00",
			"descricao_linha": "BRASILIA(DF) - CALDAS NOVAS(GO)",
			"municipio_origem": "BRASILIA",
			"uf_origem": "DF",
			"municipio_destino": "CALDAS NOVAS",
			"uf_destino": "GO",
			"extensao_secao": "318.10",
			"outorga_secao": "AUTORIZAÇÃO "
		},
		{
			"cnpj": "04.192.453/0001-18",
			"razao_social": "ALFA LUZ VIACAO TRANSPORTE LTDA",
			"numero_tar": "145",
			"numero_lop": "17",
			"data_autorizacao": "08/07/2016",
			"prefixo": "12-0140-00",
			"descricao_linha": "BRASILIA(DF) - CALDAS NOVAS(GO)",
			"municipio_origem": "BRASILIA",
			"uf_origem": "DF",
			"municipio_destino": "VIANOPOLIS",
			"uf_destino": "GO",
			"extensao_secao": "158.50",
			"outorga_secao": "AUTORIZAÇÃO "
		},
		{
			"cnpj": "04.192.453/0001-18",
			"razao_social": "ALFA LUZ VIACAO TRANSPORTE LTDA",
			"numero_tar": "145",
			"numero_lop": "17",
			"data_autorizacao": "08/07/2016",
			"prefixo": "12-0140-00",
			"descricao_linha": "BRASILIA(DF) - CALDAS NOVAS(GO)",
			"municipio_origem": "BRASILIA",
			"uf_origem": "DF",
			"municipio_destino": "VIANOPOLIS",
			"uf_destino": "GO",
			"extensao_secao": "168.60",
			"outorga_secao": "AUTORIZAÇÃO "
		},
		{
			"cnpj": "04.192.453/0001-18",
			"razao_social": "ALFA LUZ VIACAO TRANSPORTE LTDA",
			"numero_tar": "145",
			"numero_lop": "17",
			"data_autorizacao": "08/07/2016",
			"prefixo": "12-0140-00",
			"descricao_linha": "BRASILIA(DF) - CALDAS NOVAS(GO)",
			"municipio_origem": "BRASILIA",
			"uf_origem": "DF",
			"municipio_destino": "ORIZONA",
			"uf_destino": "GO",
			"extensao_secao": "210.60",
			"outorga_secao": "AUTORIZAÇÃO "
		},
		{
			"cnpj": "04.192.453/0001-18",
			"razao_social": "ALFA LUZ VIACAO TRANSPORTE LTDA",
			"numero_tar": "145",
			"numero_lop": "17",
			"data_autorizacao": "08/07/2016",
			"prefixo": "12-0140-00",
			"descricao_linha": "BRASILIA(DF) - CALDAS NOVAS(GO)",
			"municipio_origem": "BRASILIA",
			"uf_origem": "DF",
			"municipio_destino": "PIRES DO RIO",
			"uf_destino": "GO",
			"extensao_secao": "243.60",
			"outorga_secao": "AUTORIZAÇÃO "
		},
		{
			"cnpj": "04.192.453/0001-18",
			"razao_social": "ALFA LUZ VIACAO TRANSPORTE LTDA",
			"numero_tar": "145",
			"numero_lop": "17",
			"data_autorizacao": "08/07/2016",
			"prefixo": "12-0140-00",
			"descricao_linha": "BRASILIA(DF) - CALDAS NOVAS(GO)",
			"municipio_origem": "BRASILIA",
			"uf_origem": "DF",
			"municipio_destino": "PIRES DO RIO",
			"uf_destino": "GO",
			"extensao_secao": "248.51",
			"outorga_secao": "AUTORIZAÇÃO "
		},
		{
			"cnpj": "04.192.453/0001-18",
			"razao_social": "ALFA LUZ VIACAO TRANSPORTE LTDA",
			"numero_tar": "145",
			"numero_lop": "17",
			"data_autorizacao": "08/07/2016",
			"prefixo": "12-0140-00",
			"descricao_linha": "BRASILIA(DF) - CALDAS NOVAS(GO)",
			"municipio_origem": "BRASILIA",
			"uf_origem": "DF",
			"municipio_destino": "PIRES DO RIO",
			"uf_destino": "GO",
			"extensao_secao": "254.87",
			"outorga_secao": "AUTORIZAÇÃO "
		},
		{
			"cnpj": "04.192.453/0001-18",
			"razao_social": "ALFA LUZ VIACAO TRANSPORTE LTDA",
			"numero_tar": "145",
			"numero_lop": "17",
			"data_autorizacao": "06/11/2018",
			"prefixo": "12-0140-61",
			"descricao_linha": "BRASILIA(DF) - CALDAS NOVAS(GO)",
			"municipio_origem": "BRASILIA",
			"uf_origem": "DF",
			"municipio_destino": "CALDAS NOVAS",
			"uf_destino": "GO",
			"extensao_secao": "318.10",
			"outorga_secao": "AUTORIZAÇÃO "
		},
		{
			"cnpj": "04.192.453/0001-18",
			"razao_social": "ALFA LUZ VIACAO TRANSPORTE LTDA",
			"numero_tar": "145",
			"numero_lop": "17",
			"data_autorizacao": "06/11/2018",
			"prefixo": "12-0140-61",
			"descricao_linha": "BRASILIA(DF) - CALDAS NOVAS(GO)",
			"municipio_origem": "BRASILIA",
			"uf_origem": "DF",
			"municipio_destino": "VIANOPOLIS",
			"uf_destino": "GO",
			"extensao_secao": "158.50",
			"outorga_secao": "AUTORIZAÇÃO "
		},
		{
			"cnpj": "04.192.453/0001-18",
			"razao_social": "ALFA LUZ VIACAO TRANSPORTE LTDA",
			"numero_tar": "145",
			"numero_lop": "17",
			"data_autorizacao": "06/11/2018",
			"prefixo": "12-0140-61",
			"descricao_linha": "BRASILIA(DF) - CALDAS NOVAS(GO)",
			"municipio_origem": "BRASILIA",
			"uf_origem": "DF",
			"municipio_destino": "VIANOPOLIS",
			"uf_destino": "GO",
			"extensao_secao": "168.60",
			"outorga_secao": "AUTORIZAÇÃO "
		},
		{
			"cnpj": "04.192.453/0001-18",
			"razao_social": "ALFA LUZ VIACAO TRANSPORTE LTDA",
			"numero_tar": "145",
			"numero_lop": "17",
			"data_autorizacao": "06/11/2018",
			"prefixo": "12-0140-61",
			"descricao_linha": "BRASILIA(DF) - CALDAS NOVAS(GO)",
			"municipio_origem": "BRASILIA",
			"uf_origem": "DF",
			"municipio_destino": "ORIZONA",
			"uf_destino": "GO",
			"extensao_secao": "210.60",
			"outorga_secao": "AUTORIZAÇÃO "
		},
		{
			"cnpj": "04.192.453/0001-18",
			"razao_social": "ALFA LUZ VIACAO TRANSPORTE LTDA",
			"numero_tar": "145",
			"numero_lop": "17",
			"data_autorizacao": "06/11/2018",
			"prefixo": "12-0140-61",
			"descricao_linha": "BRASILIA(DF) - CALDAS NOVAS(GO)",
			"municipio_origem": "BRASILIA",
			"uf_origem": "DF",
			"municipio_destino": "PIRES DO RIO",
			"uf_destino": "GO",
			"extensao_secao": "243.60",
			"outorga_secao": "AUTORIZAÇÃO "
		},
		{
			"cnpj": "04.192.453/0001-18",
			"razao_social": "ALFA LUZ VIACAO TRANSPORTE LTDA",
			"numero_tar": "145",
			"numero_lop": "17",
			"data_autorizacao": "06/11/2018",
			"prefixo": "12-0140-61",
			"descricao_linha": "BRASILIA(DF) - CALDAS NOVAS(GO)",
			"municipio_origem": "BRASILIA",
			"uf_origem": "DF",
			"municipio_destino": "PIRES DO RIO",
			"uf_destino": "GO",
			"extensao_secao": "248.51",
			"outorga_secao": "AUTORIZAÇÃO "
		},
		{
			"cnpj": "04.192.453/0001-18",
			"razao_social": "ALFA LUZ VIACAO TRANSPORTE LTDA",
			"numero_tar": "145",
			"numero_lop": "17",
			"data_autorizacao": "06/11/2018",
			"prefixo": "12-0140-61",
			"descricao_linha": "BRASILIA(DF) - CALDAS NOVAS(GO)",
			"municipio_origem": "BRASILIA",
			"uf_origem": "DF",
			"municipio_destino": "PIRES DO RIO",
			"uf_destino": "GO",
			"extensao_secao": "254.87",
			"outorga_secao": "AUTORIZAÇÃO "
		},
		{
			"cnpj": "04.192.453/0001-18",
			"razao_social": "ALFA LUZ VIACAO TRANSPORTE LTDA",
			"numero_tar": "145",
			"numero_lop": "17",
			"data_autorizacao": "15/05/2017",
			"prefixo": "12-0274-00",
			"descricao_linha": "CALDAS NOVAS(GO) - ARAGUARI(MG)",
			"municipio_origem": "CALDAS NOVAS",
			"uf_origem": "GO",
			"municipio_destino": "ARAGUARI",
			"uf_destino": "MG",
			"extensao_secao": "139.80",
			"outorga_secao": "AUTORIZAÇÃO "
		}
	]
};

export default class Graph {
	edges = {};
	nodes = [];

	constructor() {
		graph.empresas_habilitadas_regular.forEach((linha) => {
			if (this.nodes.findIndex(node => node.municipio_origem === linha.municipio_origem) === -1) {
				this.addNode(linha);
			}
		});
		this.nodes.forEach((node) => {
			const destinos = graph.empresas_habilitadas_regular.filter((linha) => linha.municipio_origem === node.municipio_destino);
			destinos.forEach((destino) => {
				this.addDirectedEdge(node, destino);
			});
		});

		this.display();
	}

	addNode(node) {
		this.nodes.push(node);
		this.edges[node] = [];
	}

	addEdge(node1, node2, weight = 1) {
		this.edges[node1].push({ node: node2, weight: weight });
		this.edges[node2].push({ node: node1, weight: weight });
	}

	addDirectedEdge(node1, node2, weight = 1) {
		console.log(node1, node2);
		this.edges[node1].push({ node: node2, weight: weight });
	}

	// addEdge(node1, node2) {
	//   this.edges[node1].push(node2);
	//   this.edges[node2].push(node1);
	// }

	// addDirectedEdge(node1, node2) {
	//   this.edges[node1].push(node2);
	// }

	display() {
		let graph = "";
		this.nodes.forEach(node => {
			graph += node.municipio_origem + "->" + this.edges[node].map(n => n.node.municipio_destino).join(", ") + "\n";
		});
		console.log(graph);
	}
}
